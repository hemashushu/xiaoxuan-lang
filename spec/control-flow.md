# 流程控制

## 条件语句

### `如果` 语句

`如果`（`if`） 条件语句的语法：

`如果 ... 那么 ... 否则 ...`
`if ... then ... else ...`

语句有 3 个表达式：

1. 第一个表达式是一个值为 `逻辑`（`Boolean`） 的条件表达式；
2. 如果条件表达式的值为 true，则返回第二个表达式的值；
3. 如果条件表达式的值为 false，则返回第三个表达式的值。

示例：

```
让 x = 90
让 a = 如果 x >= 60 那么 "及格" 否则 "不及格"
```

需要注意：

* 条件表达式只接受逻辑类型的返回值；
* `那么` 和 `否则` 两个表达式的返回值的数据类型必须一致；
* 如果忽略条件语句的返回值（即条件语句的返回值不赋值给一个变量），则对 `那么` 和 `否则` 表达式返回值的数据类型不作要求。

#### 多行格式

`如果` 语句可以写成多行格式，可以在 `那么`、`否则` 后面换行，然后最后加上 `以上` 表示语句块结束。另外，在条件表达式后面也是可以换行的。下列都是合法的多行格式：

```
如果 ...
那么 ...
否则 ...

如果 ...
那么
    ...
否则
    ...
以上

如果 ... 那么
    ...
否则
    ...
以上
```

```
if ...
then ...
else ...

if ...
then
    ...
else
    ...
end

if ... then
    ...
else
    ...
end
```

#### 省略 `else` 语句

如果忽略条件语句的返回值，也可以省略 `else` 语句，示例：

```
如果 x > 90 那么
    输出行 ("优秀")
以上
```

#### 多个条件语句组合

在 `否则` 后面，也可以追加另一个 `如果` 语句，比如：

```
让 x = 89
如果 x >= 90 那么
    输出行 ("优秀")
否则 如果 x >= 80 那么
    输出行 ("好")
否则 如果 x >= 60 那么
    输出行 ("良")
否则
    输出行 ("加油")
以上
```

```
let x = 89
if x >= 90 then
    writeLine ("Excellent")
else if x >= 80 then
    writeLine ("Good")
else if x >= 60 then
    writeLine ("Fair")
else
    writeLine ("Poor")
end
```

### `条件分支` 语句

当有多个条件时，除了可以使用多个 `如果` 语句组合，还能使用 `条件分支` 语句。

`条件分支` 语句的语法：

```
条件分支
    情况 条件表达式1: 语句1
    情况 条件表达式2: 语句2
    ...
    默认: 语句N
以上
```

```
cond
    case expr1: statement1
    case expr2: statement2
    ...
    default: statementN
end
```

其中最后一个 `默认` 语句是可选的。

跟 `如果` 语句一样，条件分支语句也能返回值。示例：

```
让 x = 70
让 s = 条件分支
    情况 x>=90: "优"
    情况 x>=80: "好"
    情况 x>=60: "良"
    默认: "加油"
以上
```

```
let x = 70
let s = cond
    case x>=90: "Excellent"
    case x>=80: "Good"
    case x>=60: "Fair"
    default: "Poor"
end
```

#### 条件分支语句的局部变量

有时需要在条件分支的 `情况`（`case`） 里使用某些计算后的值，但这些值对于条件分支语句之外没有用处，这时可以使用 `其中`（`where`）关键字在条件分支里定义及计算局部变量。示例：

```
让 x = 70
让 s = 条件分支
    其中 isEven = x `余` 2 == 0,
         isOdd = x `余` 2 != 0
    情况 x >= 90 && isEven: "优.偶数"
    情况 x >= 90 && isOdd: "优.奇数"
    ...
以上
```

```
let x = 70
let s = cond
    where isEven = x `rem` 2 == 0,
         isOdd = x `rem` 2 != 0
    case x >= 90 && isEven: "Excellent.Even"
    case x >= 90 && isOdd: "Excellent.Odd"
    ...
end
```

`其中` 关键字后面加上一个或多个变量的声明和赋值，多个变量之间使用逗号 "," 分隔。

`其中` 关键字也可以写在 `情况` 的后面，表示其声明的变量仅仅在当前情况下使用，比如上例可以写成：

```
让 x = 70
让 s = 条件分支
    情况 x >= 90 && isEven
        其中 isEven = x `余` 2 == 0
        :"优.偶数"
    情况 x >= 90 && isOdd
        其中 isOdd = x `余` 2 != 0
        :"优.奇数"
    ...
以上
```

```
let x = 70
let s = cond
    case x >= 90 && isEven
        where isEven = x `rem` 2 == 0
        : "Excellent.Even"
    case x >= 90 && isOdd
        where isOdd = x `rem` 2 != 0
        : "Excellent.Odd"
    ...
end
```

#### 函数的条件分支与数学的函数定义

函数加上条件分支语句与数学的函数定义非常接近，考虑如下一个函数：

```
function int check (Int x) cond
    case x >= 90: 1
    case x >= 80: 2
    case x >= 70: 3
    case x >= 60: 4
    default: 5
end
```

对应的数学函数

```
            /  1: x >= 90
            |  2: x >= 80
check(x) = <|  3: x >= 70
            |  4: x >= 60
            \  4
```

### `选择` 语句

如果需要一个值与多个候选值比较，可以使用 `选择`（`switch`）语句。

`选择` 语句的语法：

```
选择 variable
    情况 value1: ...
    情况 value2: ...
    情况 value3: ...
    默认: ...
以上
```

```
switch variable
    case value1: ...
    case value2: ...
    case value3: ...
    default: ...
end
```

选择语句跟条件语句不同的地方在于，选择语句仅仅让指定的变量的值跟每个情况里的字面量或者常量进行相等比较。

`情况` 后面可以跟一个或多个字面量或者常量，只需用逗号分隔即可。

示例：

```
让 d = 1
选择 d
    情况 1,2,3,4,5:
        输出行("工作日")
    情况 6,7:
        输出行("假日")
以上
```

```
let d = 1
switch d
    case 1,2,3,4,5:
        writeLine("Working days")
    case 6,7:
        writeLine("Holiday")
end
```

跟 `如果`，`条件分支` 语句一样，`选择` 语句也是可以返回值的，示例：

```
让 d = 2
让 s = 选择 d
    情况 1,2,3,4,5: "工作日"
    情况 6,7: "假日"
以上
输出行(s)
```

```
let d = 2
let s = switch d
    case 1,2,3,4,5: "Working days"
    case 6,7: "Holiday"
end
writeLine(s)
```

跟其他语句的 `switch` 语句不一样，XiaoXuan 的 `情况` 后面不需要 `break` 关键字。

## 循环语句
