# 包和名称空间

## 包

一个完整的程序或者库称为 `包`（`package`），包用于实现程序模块化以及代码重用。

具体来说，一个包对应着文件系统的一个文件夹，包基本的内容有：

* 包配置文件，文件名固定为 `package.toml`。该文件用于描述包的名称、版本、使用的语言以及依赖关系等；
* 文件夹 `src`，用于存放源代码文件；
* 文件 `src/main.xuan` 或者 `src/lib.xuan`，该文件是包的顶层源码文件，前者用于生成可执行程序，后者用于生成库，可以二选一，也可以同时存在。

另外一个典型的包通常还包含有（但不是必须的）：

* 说明文件，对包的简要说明，文件名一般是 `README`、`README.txt` 或者 `README.md`；
* 授权协议文件，描述包的授权方式，文件名一般是 `LICENSE`、`LICENSE.txt` 或者 `LICENSE.md`。

根据包配置文件指定的本地语言，文件夹和文件名也会作出相应的本地化。比如包指定本地语言为 `zh-CN`（简体中文），则上述的提到的文件名将会是：`源码/主要.xuan`、`源码/库.xuan`、`说明{,.txt,.md}`、`授权协议{,.txt,.md}` 等。

### package.toml 配置文件

一个基本的 `package.toml` 文件内容如下：

```toml
#lang=en

[package]
name = "my_first_package"
version = "0.1.0"
```

文件的第一行 `#!en` 用于标识当前配置文件使用哪一种本地语言，缺省的情况下是 `en`（表示英语），这是一个本地语言代码（locale code），常见有 `zh_CN`（简体中文）、`zh_HK`（繁体中文）、`ja`（日语）、`fr`（法语）、`de`（德语）等等。

如果指定了其他语言，则该配置文件的相应字段都要使用指定本地语言。

示例：

```toml
#lang=zh_CN

[包]
名称 = "我的第一个包"
版本 = "0.1.0"
```

为了便于本规格文档翻译成其他语言，下面全部使用默认的语言（即 `en`）说明该配置文件。

#### name 字段



## 命名空间

### 名称路径

std::math.floor(...)

### 隐含的命名空间

常量组、结构体、联合体、特性都会产生同名的名称空间，其中联合体的子类型、以及将特性赋予给结构体等会产生二级命名空间。所以不能创建跟这些数据类型同名的子命名空间。相应地，也不能创建跟子命名空间同名的常量组、结构体、联合体、特性。

示例：

```js
namespace Foo

    struct User
        Int id
        String name
    end

    namespace User  # Error
        # ...
    end

    unit Color
        RGB(Int red, Int green, Int blue)
        HSL(Int H, Int S, Int L)
    end

    namespace Color  # Error
        # ...
    end

    namespace Color::RGB  # Error
        # ...
    end
end
```

使用 use 引入
* 对于函数，一般引入其所在的名称空间，而不是把函数名称引入；
* 对于结构体、联合体、枚举、常量组、特性等其他项，习惯是指定它们的完整路径，即将它们本身引入。

## 语言相关代码

在模块级作用范围内，使用 `lang` 语句块可以定义语言专门的代码

```js
lang "zh-cn"
    运算符 ("+", "加", 优先级 = 99, 结合顺序值 = 结合顺序.左)
end
```